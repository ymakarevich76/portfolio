"use strict";var buttons=document.querySelectorAll("button");if(buttons)for(var i=0;i<buttons.length;i++)buttons[i].addEventListener("mouseup",function(){this.blur()});var swiper=new Swiper(".reviews-slider",{pagination:{el:".swiper-pagination",clickable:!0},slidesPerView:3,centeredSlides:!0,initialSlide:3,loop:!0}),imgSlider=new Swiper(".image-slider__container",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},loop:!0,spaceBetween:23,slidesPerView:1,breakpoints:{426:{slidesPerView:2},768:{slidesPerView:3},1440:{slidesPerView:4}}}),videoSlider=new Swiper(".video-slider__container",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},slidesPerView:1,centeredSlides:!0,loop:!0}),bigSlider=new Swiper(".slider-big__container",{pagination:{el:".swiper-pagination",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'" > '+(e+1)+"</span>"}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},loop:!0,slidesPerView:1,initialSlide:1}),hamburger=document.querySelector(".header__burger"),nav=document.querySelector(".header__nav"),btnClose=document.querySelector(".header__btn-close"),body=document.querySelector("body"),openMenu=function(){body.classList.add("fixed"),nav.classList.add("header__nav--active")},closeMenu=function(){body.classList.remove("fixed"),nav.classList.remove("header__nav--active")};hamburger.addEventListener("click",function(){openMenu()}),btnClose.addEventListener("click",function(){closeMenu()}),nav.addEventListener("click",function(e){e.target===nav&&closeMenu()});var $page=$("html, body");$('a[href*="#"]').on("click",function(){return $page.animate({scrollTop:$($.attr(this,"href")).offset().top},400),!1});var modalTrigger=document.querySelectorAll("[data-modal]"),modal=document.querySelector(".modal"),modalOpen=function(){modal.classList.add("show","fade"),modal.classList.remove("hide"),document.body.style.overflow="hidden",clearInterval(modalTimerId)},modalClose=function(){modal.classList.remove("show","fade"),modal.classList.add("hide"),document.body.style.overflow=""};modalTrigger.forEach(function(e){e.addEventListener("click",modalOpen)}),modal.addEventListener("click",function(e){e.target!==modal&&""!=e.target.getAttribute("data-close")||modalClose()}),document.addEventListener("keydown",function(e){"Escape"===e.code&&modal.classList.contains("show")&&modalClose()});var modalTimerId=setTimeout(modalOpen,3e3),showModalByScroll=function e(){window.scrollY+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&(modalOpen(),window.removeEventListener("scroll",e))};window.addEventListener("scroll",showModalByScroll);var tickerAnim,prizeNodes,phone,submitForm,prizes=[{text:"фотосессия с животными в фотостудии Анны Кранц",color:"hsl(230, 77%, 45%)"},{text:"ошейник для домашнего питомца",color:"hsl(54, 100%, 50%)"},{text:"посещение Moscow Safari Park",color:"hsl(230, 77%, 45%)"},{text:"выездной мастер-класс",color:"hsl(54, 100%, 50%)"},{text:"поздравление ростовой куклы",color:"hsl(230, 77%, 45%)"},{text:"блеск-тату",color:"hsl(54, 100%, 50%)"},{text:"выездное мини-шоу мыльных пузырей",color:"hsl(230, 77%, 45%)"},{text:"выездной мини-зоопарк",color:"hsl(54, 100%, 50%)"},{text:"эко-корм для домашнего питомца",color:"hsl(230, 77%, 45%)"},{text:"выездная мини-дискотека",color:"hsl(54, 100%, 50%)"}],wheel=document.querySelector(".deal-wheel"),spinner=wheel.querySelector(".spinner"),trigger=wheel.querySelector(".btn-spin"),ticker=wheel.querySelector(".ticker"),prizeSlice=360/prizes.length,prizeOffset=Math.floor(180/prizes.length),spinClass="is-spinning",selectedClass="selected-text",spinnerStyles=window.getComputedStyle(spinner),rotation=0,currentSlice=0,createPrizeNodes=function(){prizes.forEach(function(e,t){var n=e.text,e=(e.color,e.reaction),t=prizeSlice*t*-1-prizeOffset;spinner.insertAdjacentHTML("beforeend",'<li class="prize" data-reaction='.concat(e,' style="--rotate: ').concat(t,'deg">\n        <span class="text">').concat(n,"</span>\n      </li>"))})},createConicGradient=function(){spinner.setAttribute("style","background: conic-gradient(\n      from -90deg,\n      ".concat(prizes.map(function(e,t){e=e.color;return"".concat(e," 0 ").concat(100/prizes.length*(prizes.length-t),"%")}).reverse(),"\n    );"))},setupWheel=function(){createConicGradient(),createPrizeNodes(),prizeNodes=wheel.querySelectorAll(".prize")},spinertia=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},runTickerAnimation=function e(){var t=spinnerStyles.transform.split("(")[1].split(")")[0].split(","),n=t[0],t=t[1],n=Math.atan2(t,n);n<0&&(n+=2*Math.PI);n=Math.round(n*(180/Math.PI)),n=Math.floor(n/prizeSlice);currentSlice!==n&&(ticker.style.animation="none",setTimeout(function(){return ticker.style.animation=null},10),currentSlice=n),tickerAnim=requestAnimationFrame(e)},selectPrize=function(){var e=Math.floor(rotation/prizeSlice);prizeNodes[e].classList.add(selectedClass);e=document.querySelector(".selected-text .text").textContent;document.querySelector("#form-wheel-selected").value=e};trigger.addEventListener("click",function(){trigger.disabled=!0,rotation=Math.floor(360*Math.random()+spinertia(2e3,5e3)),prizeNodes.forEach(function(e){return e.classList.remove(selectedClass)}),wheel.classList.add(spinClass),spinner.style.setProperty("--rotate",rotation),ticker.style.animation="none",runTickerAnimation()}),spinner.addEventListener("transitionend",function(){cancelAnimationFrame(tickerAnim),rotation%=360,selectPrize(),wheel.classList.remove(spinClass),spinner.style.setProperty("--rotate",rotation),trigger.disabled=!0}),setupWheel(),document.querySelector("#form-wheel-tel")&&(phone=document.querySelector("#form-wheel-tel"),submitForm=document.querySelector(".form-wheel__submit"),phone.onchange=function(){/[_]/.test(phone.value)?(alert("Номер телефона введен неправильно!"),submitForm.setAttribute("disabled","disabled")):submitForm.removeAttribute("disabled")},phone.oninput=function(){checkID=/\d/.test(phone.value),checkID&&submitForm.removeAttribute("disabled")}),$("#form-wheel-tel").mask("+7 (999) 999-9999"),$("#center_ok").click(function(){$(this).setCursorPosition(3)}).mask("+7(999) 999-9999"),$("#center_not_ok").mask("+7(999) 999-9999");